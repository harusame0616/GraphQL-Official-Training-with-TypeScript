# GraphQL Official Training with TypeScript

https://graphql.org/graphql-js/


GraphQLについてはよく記事で見ていて存在は知っていたものの、  
実際に試せていなかったのですが、改めて GraphQL とはなんなのかというところの調査と 
公式チュートリアルを実施してみました。  
同じくGraphQLを始めてみようというかたの足がかりになれば幸いです。  

## GraphQL 概要

GraphQLとはクライアントのサーバーの通信のための言語仕様です。  
様々な言語で様々な実装があり、幅広い環境で利用することが可能となっています。

[https://graphql.org/code/](https://graphql.org/code/)

特徴としては以下のものが挙げられます。

- スキーマにより型安全な開発ができる。
- 独自のクエリ言語によって一度のリクエストで過不足なくデータが取得できる。

GraphQLの利用のイメージですが大雑把に以下のような流れになります。

- GraphQLサーバー側で事前にAPIやデータのスキーマ定義とその実装を行なう。
- クライアントからはGraphQL独自のクエリ言語を用いてデータの取得、更新などをリクエストを行う
    - 一般的なPOSTリクエストによってリクエストできる
    - GraphQLクライアントライブラリなどを使うとキャッシュ

RestAPIだと、ユーザーとユーザーが持っている本データを取得したい場合、ユーザー情報と本情報をそれぞれのAPIから取得して必要な属性を取捨選択し、結合するといった流れになることが多いかと思います。

しかし、GraphQLでは必要なデータと必要なフィールドを指定して取得することができ、フロントで必要なデータを様々なAPIから取得して結合するといったことが不要となります。

IDが 0001 のユーザーの情報と持っている本情報を情報を取得するクエリの例

```graphql
{
    user(id: "0001") { # ID が 0001 のユーザー
        # プロパティとして名前とemailを取得する
        name 
        email
        books { # またユーザーが持っている本情報も併せて取得する
            title
            author
        }
    }
}
```

デメリットで言うと以下のような点が挙げられます。

- クエリを順番に処理していくためN+1問題が発生しやすい
    - dataloader ライブラリの遅延読み込みで対応
- 単一のエンドポイントに対してリクエストを投げるためURLベースのキャッシュが行えない
    - 専用のクライアントライブラリを利用する
        - Apollo Client
        - Relay

本リポジトリでは公式のチュートリアルを実際に試してみた内容を
章ごとに各ディレクトリにまとめています。